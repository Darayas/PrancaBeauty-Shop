(function(n){typeof module=="object"&&typeof module.exports=="object"?module.exports=function(t){n(t,window,document)}:n(jQuery,window,document)})(function(n,t,i){function f(n,t){t=t||{};n._options.elementContainer=t.elementContainer||"div";var i=t.classNames||{};n._options.classNameSeconds=i.seconds||"jst-seconds";n._options.classNameMinutes=i.minutes||"jst-minutes";n._options.classNameHours=i.hours||"jst-hours";n._options.classNameClearDiv=i.clearDiv||"jst-clearDiv";n._options.classNameTimeout=i.timeout||"jst-timeout"}Number.isFinite=Number.isFinite||function(n){return typeof n=="number"&&isFinite(n)};var u,r=function(n){return this._options={},this.targetElement=n,this};r.start=function(n,t){return u=new r(t),f(u,n),u.start(n)};r.prototype.start=function(t){var r=this,f=function(n){var e=i.createElement(r._options.elementContainer),t,u,f;return e.className=r._options.classNameSeconds,t=i.createElement(r._options.elementContainer),t.className=r._options.classNameMinutes,u=i.createElement(r._options.elementContainer),u.className=r._options.classNameHours,f=i.createElement(r._options.elementContainer),f.className=r._options.classNameClearDiv,n.append(u).append(t).append(e).append(f)};this.targetElement.each(function(i,r){var o=this,e=n(r),s=e.attr("class");e.on("complete",function(){clearInterval(e.intervalId)});e.on("complete",function(){e.onComplete(e)});e.on("complete",function(){e.addClass(o._options.classNameTimeout)});e.on("complete",function(){t&&t.loop===!0&&u.resetTimer(e,t,s)});e.on("resetime",function(){clearInterval(e.intervalId);console.log(e);e.removeClass(o._options.classNameTimeout);e.data("timeLeft",0);e.paused=!1;t.secondsLeft=0;var n=t.secondsLeft||o.fetchSecondsLeft(e),i=n+o.currentTime(),r=i-o.currentTime();o.setFinalValue(o.formatTimeLeft(r),e)});e.on("start",function(){var r=t.secondsLeft||o.fetchSecondsLeft(e),u=t.refreshRate||1e3,i=r+o.currentTime(),n=i-o.currentTime();o.setFinalValue(o.formatTimeLeft(n),e);intervalId=setInterval(function(){n=i-o.currentTime();n<0&&(n=0);e.data("timeLeft",n);o.setFinalValue(o.formatTimeLeft(n),e)}.bind(this),u);e.intervalId=intervalId});e.on("pauseResume",function(){e.paused?(console.log("resume"),e.trigger("resume")):(console.log("pause"),e.trigger("pause"))});e.on("pause",function(){clearInterval(e.intervalId);e.paused=!0});e.on("resume",function(){e.paused=!1;t.secondsLeft=e.data("timeLeft");e.trigger("start")});return f(e),this.startCountdown(e,t)}.bind(this))};r.prototype.fetchSecondsLeft=function(n){var t=n.data("seconds-left"),i=n.data("minutes-left");if(Number.isFinite(t))return parseInt(t,10);if(Number.isFinite(i))return parseFloat(i)*60;throw"Missing time data";};r.prototype.startCountdown=function(n,t){t=t||{};var i=null,r=function(){return clearInterval(i),this.clearTimer(n)}.bind(this);if(n.onReset=t.onReset||!1,n.onReset!=!1){t.onReset.hide();n.onReset.on("click",function(){console.log("reset");n.trigger("resetime");n.onStart&&n.onStart.show();n.onPause&&n.onPause.hide();n.onReset&&n.onReset.hide()})}if(n.onComplete=t.onComplete||r,n.onPause=t.onPause||!1,n.onPause!=!1){t.onPause.hide();n.onPause.on("click",function(){n.paused?(console.log("resume"),n.trigger("resume")):(console.log("pause"),n.trigger("pause"))})}if(n.onStart=t.onStart||!1,n.onStart!=!1)n.onStart.on("click",function(){console.log("start btn");n.trigger("start");n.onStart&&n.onStart.hide();n.onPause&&n.onPause.show();n.onReset&&n.onReset.show()})};r.prototype.resetTimer=function(n,t,i){var r=0;t.loopInterval&&(r=parseInt(t.loopInterval,10)*1e3);setTimeout(function(){n.trigger("reset");n.attr("class",i+" loop");n.trigger("start")},r)};r.prototype.clearTimer=function(n){n.find(".jst-seconds").text("00");n.find(".jst-minutes").text("00:");n.find(".jst-hours").text("00:")};r.prototype.currentTime=function(){return Math.round((new Date).getTime()/1e3)};r.prototype.formatTimeLeft=function(n){var i=function(n,t){return t=t||2,n=n+"",n.length>=t?n:Array(t-n.length+1).join(0)+n},r=Math.floor(n/3600),t,u;return n-=r*3600,t=Math.floor(n/60),n-=t*60,u=parseInt(n%60,10),+r==0&&+t==0&&+u==0?[]:[i(r),i(t),i(u)]};r.prototype.setFinalValue=function(n,t){if(n.length===0)return this.clearTimer(t),t.trigger("complete"),!1;t.find("."+this._options.classNameSeconds).text(n.pop());t.find("."+this._options.classNameMinutes).text(n.pop()+":");t.find("."+this._options.classNameHours).text(n.pop()+":")};n.fn.startTimer=function(n){return this.TimerObject=r,r.start(n,this),this}});